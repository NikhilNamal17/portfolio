<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f9097e17a74d6fe493dd.css">*,:after,:before{box-sizing:border-box}:after,:before{text-decoration:inherit;vertical-align:inherit}html{cursor:default;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;word-break:break-word}body{margin:0}h1{font-size:2em;margin:.67em 0}dl dl,dl ol,dl ul,ol dl,ol ol,ol ul,ul dl,ul ol,ul ul{margin:0}hr{height:0;overflow:visible}main{display:block}nav ol,nav ul{list-style:none;padding:0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}audio,canvas,iframe,img,svg,video{vertical-align:middle}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}iframe,img{border-style:none}svg:not([fill]){fill:currentColor}svg:not(:root){overflow:hidden}table{border-collapse:collapse}button,input,select{margin:0}button{overflow:visible;text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}fieldset{border:1px solid #a0a0a0;padding:.35em .75em .625em}input{overflow:visible}legend{color:inherit;display:table;max-width:100%;white-space:normal}progress{display:inline-block;vertical-align:baseline}select{text-transform:none}textarea{margin:0;overflow:auto;resize:vertical}[type=checkbox],[type=radio]{padding:0}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}details,dialog{display:block}dialog{background-color:#fff;border:solid;color:#000;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;left:0;margin:auto;padding:1em;position:absolute;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}dialog:not([open]){display:none}summary{display:list-item}canvas{display:inline-block}template{display:none}[tabindex],a,area,button,input,label,select,summary,textarea{touch-action:manipulation}[hidden]{display:none}[aria-busy=true]{cursor:progress}[aria-controls]{cursor:pointer}[aria-disabled=true],[disabled]{cursor:not-allowed}[aria-hidden=false][hidden]{display:initial}[aria-hidden=false][hidden]:not(:focus){clip:rect(0,0,0,0);position:absolute}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}code,kbd,pre,samp{font-family:Menlo,Consolas,Roboto Mono,"Ubuntu Monospace",Noto Mono,Oxygen Mono,Liberation Mono,monospace,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}</style><meta name="generator" content="Gatsby 2.19.12"/><link rel="alternate" type="application/rss+xml" title="Nikhil Namal • nikhilnamal.netlify.com" href="/rss.xml"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#f9f9f8"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/android-chrome-512x512.png"/><title data-react-helmet="true">Request Timeouts With the Fetch API • Nikhil Namal</title><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link data-react-helmet="true" rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/><link data-react-helmet="true" rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link data-react-helmet="true" rel="mask-icon" href="/safari-pinned-tab.svg" color="#f2930d"/><meta data-react-helmet="true" name="theme-color" content="#f9f9f8"/><meta data-react-helmet="true" name="apple-mobile-web-app-title" content="nikhil_namal"/><meta data-react-helmet="true" name="application-name" content="nikhil_namal"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#f2930d"/><meta data-react-helmet="true" name="description" content="The Fetch API is great, but didn&#x27;t ship with the ability to timeout requests. There&#x27;s a new API to help with that."/><meta data-react-helmet="true" name="twitter:site" content="@lowmess"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:site_name" content="Nikhil Namal"/><meta data-react-helmet="true" property="og:title" name="twitter:title" content="Request Timeouts With the Fetch API"/><meta data-react-helmet="true" property="og:url" content="https://nikhilnamal.netlify.com/blog/fetch-with-timeout/"/><meta data-react-helmet="true" property="og:description" name="twitter:description" content="The Fetch API is great, but didn&#x27;t ship with the ability to timeout requests. There&#x27;s a new API to help with that."/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-7f057ab76526c2332872.js"/><link as="script" rel="preload" href="/styles-d7bca83241f8e3231f4d.js"/><link as="script" rel="preload" href="/app-849c33fb70df35abcf41.js"/><link as="script" rel="preload" href="/commons-652c8223faa9c70cdf83.js"/><link as="script" rel="preload" href="/component---src-pages-blog-fetch-with-timeout-index-mdx-4e5ff46ac778a918ab23.js"/><link as="fetch" rel="preload" href="/page-data\blog\fetch-with-timeout\page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="f3bn75">html{background-color:#f2930d;line-height:1.5;-webkit-scroll-behavior:smooth;-moz-scroll-behavior:smooth;-ms-scroll-behavior:smooth;scroll-behavior:smooth;}@media (prefers-reduced-motion:reduce){html{-webkit-scroll-behavior:auto;-moz-scroll-behavior:auto;-ms-scroll-behavior:auto;scroll-behavior:auto;}}@media print{html{background:none;}}::selection{background-color:#f2930d !important;color:#443e35 !important;}@media print{nav,footer{display:none !important;}#main-content{margin-bottom:0 !important;}}</style><style data-emotion-css="1qruwav">.css-1qruwav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;border-color:transparent !important;background-image:url(/topography_900x900.png);background-repeat:repeat;background-position:top center;background-size:900px;}@media (min-resolution:192dpi){.css-1qruwav{background-image:url(/topography_1800x1800.png);}}@media (min-width:48em){.css-1qruwav{background-image:url(/topography_1200x1200.png);background-size:1200px;}}@media (min-width:48em) and (min-resolution:192dpi){.css-1qruwav{background-image:url(/topography_2400x2400.png);}}@media print{.css-1qruwav{display:block;min-height:0;border:0;background:none;}}</style><style data-emotion-css="yy6pts">.css-yy6pts{box-sizing:border-box;margin:0;min-width:0;border:0.5rem solid;background-color:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;border-color:transparent !important;background-image:url(/topography_900x900.png);background-repeat:repeat;background-position:top center;background-size:900px;}@media screen and (min-width:48em){.css-yy6pts{border:1rem solid;}}@media (min-resolution:192dpi){.css-yy6pts{background-image:url(/topography_1800x1800.png);}}@media (min-width:48em){.css-yy6pts{background-image:url(/topography_1200x1200.png);background-size:1200px;}}@media (min-width:48em) and (min-resolution:192dpi){.css-yy6pts{background-image:url(/topography_2400x2400.png);}}@media print{.css-yy6pts{display:block;min-height:0;border:0;background:none;}}</style><div class="e1aekras0 css-yy6pts"><style data-emotion-css="j20by6">.css-j20by6{box-sizing:border-box;margin:0;min-width:0;-webkit-flex:1;-ms-flex:1;flex:1;max-width:100%;border-radius:0.25rem;padding-top:1rem;padding-bottom:1rem;padding-left:1rem;padding-right:1rem;color:#443e35;background-color:#ffffff;}@media screen and (min-width:48em){.css-j20by6{padding-left:2rem;padding-right:2rem;}}</style><div class="css-j20by6"><style data-emotion-css="xhsa5l">.css-xhsa5l{box-sizing:border-box;margin:0;min-width:0;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;max-width:64rem;height:100%;margin-left:auto;margin-right:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-xhsa5l"><style data-emotion-css="1hzzf6s">.css-1hzzf6s{box-sizing:border-box;margin:0;min-width:0;position:relative;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:0;margin-bottom:4rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media screen and (min-width:48em){.css-1hzzf6s{margin-top:0.5rem;margin-bottom:8rem;}}@media screen and (min-width:64em){.css-1hzzf6s{margin-top:1rem;}}</style><nav class="css-1hzzf6s"><style data-emotion-css="1pjd7l6">.css-1pjd7l6{box-sizing:border-box;margin:0;min-width:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;position:absolute;top:0;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:1rem;background-color:#ffffff;font-family:Menlo,Consolas,Roboto Mono,Ubuntu Monospace,Oxygen Mono,Liberation Mono,monospace;font-size:0.875rem;opacity:0;pointer-events:none;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;}.css-1pjd7l6:hover{color:#f2930d;}@media screen and (min-width:48em){.css-1pjd7l6{font-size:1rem;}}.css-1pjd7l6:focus{pointer-events:auto;opacity:1;}</style><a href="#main-content" class="css-1pjd7l6">Skip to main content</a><style data-emotion-css="zkfaav">.css-zkfaav{box-sizing:border-box;margin:0;min-width:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-zkfaav"><style data-emotion-css="1w1pv9a">.css-1w1pv9a{box-sizing:border-box;margin:0;min-width:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;display:none;color:#443e35;}@media screen and (min-width:48em){.css-1w1pv9a{display:inline;}}</style><a tabindex="-1" aria-hidden="true" class="css-1w1pv9a" href="/"><p style="color:white;background-color:orange;padding:5px;font-family:monospace;font-weight:600;font-size:15px"> <!-- -->&lt;nikhil.n /&gt;</p><title>Go to homepage</title></a></div><style data-emotion-css="1nh5zdk">.css-1nh5zdk{box-sizing:border-box;margin:0;min-width:0;margin:0;padding:0;list-style-type:none;font-size:0.875rem;font-family:Menlo,Consolas,Roboto Mono,Ubuntu Monospace,Oxygen Mono,Liberation Mono,monospace;}@media screen and (min-width:48em){.css-1nh5zdk{font-size:1rem;}}</style><ul class="css-1nh5zdk"><style data-emotion-css="b6te71">.css-b6te71{box-sizing:border-box;margin:0;min-width:0;display:inline-block;}.css-b6te71 + .css-b6te71{margin-left:0.5rem;}.css-b6te71 a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-b6te71 a:hover{color:#f2930d;}</style><li class="css-b6te71"><a href="/"><style data-emotion-css="1gm6kez">.css-1gm6kez{box-sizing:border-box;margin:0;min-width:0;padding-left:0.25rem;padding-right:0.25rem;padding-bottom:0.25rem;}.active .css-1gm6kez{border-bottom:0.25rem solid;border-color:#f2930d;}</style><span class="css-1gm6kez">Home</span></a></li><li class="css-b6te71"><a href="/projects/"><span class="css-1gm6kez">Projects</span></a></li><li class="css-b6te71"><a class="active" href="/blog/"><span class="css-1gm6kez">Blog</span></a></li><li class="css-b6te71"><a href="/about/"><span class="css-1gm6kez">About</span></a></li></ul></nav><style data-emotion-css="1rhqkbb">.css-1rhqkbb{box-sizing:border-box;margin:0;min-width:0;margin-bottom:4rem;}@media screen and (min-width:48em){.css-1rhqkbb{margin-bottom:8rem;}}</style><main id="main-content" class="css-1rhqkbb"><article><header><style data-emotion-css="13n36at">.css-13n36at{box-sizing:border-box;margin:0;min-width:0;font-size:2.25rem;font-family:heading;font-weight:heading;line-height:heading;font-size:1.25rem;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Oxygen,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.25;font-weight:700;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;margin-bottom:1rem;font-size:2.25rem;}@media screen and (min-width:48em){.css-13n36at{font-size:1.5rem;}}@media screen and (min-width:48em){.css-13n36at{font-size:3rem;}}</style><h1 class="css-13n36at">Request Timeouts With the Fetch API</h1><style data-emotion-css="1wpvqvk">.css-1wpvqvk{box-sizing:border-box;margin:0;min-width:0;font-size:2.25rem;font-family:heading;font-weight:heading;line-height:heading;font-size:1.25rem;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Oxygen,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.25;font-weight:700;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;margin-bottom:2rem;font-size:1.5rem;font-weight:500;}@media screen and (min-width:48em){.css-1wpvqvk{font-size:1.5rem;}}@media screen and (min-width:48em){.css-1wpvqvk{font-size:2.25rem;}}</style><p class="css-1wpvqvk"><time dateTime="2019-03-30">March 30, 2019</time></p><style data-emotion-css="aatphz">.css-aatphz{box-sizing:border-box;margin:0;min-width:0;max-width:8rem;height:0.5rem;margin-top:2rem;margin-left:0;margin-right:0;margin-bottom:4rem;border:0;background-color:#f2930d;}</style><hr class="css-aatphz"/></header><style data-emotion-css="18vl5qo">.css-18vl5qo{box-sizing:border-box;margin:0;min-width:0;line-height:1.5;font-size:1rem;}.css-18vl5qo > *{margin-top:0;margin-bottom:0;}.css-18vl5qo > * + *{margin-top:1rem;}.css-18vl5qo b,.css-18vl5qo strong,.css-18vl5qo em,.css-18vl5qo small,.css-18vl5qo code{line-height:solid;}.css-18vl5qo sup,.css-18vl5qo sub{vertical-align:baseline;position:relative;top:-0.4em;}.css-18vl5qo sub{top:0.4em;}.css-18vl5qo iframe{margin-top:2rem;margin-bottom:2rem;border:1px solid;border-color:#efedea;}.css-18vl5qo details{border-left:0.5rem solid;border-color:#f2930d;border-radius:0.125rem;padding:1rem;margin-top:2rem;margin-bottom:2rem;background-color:#f9f9f8;}@media screen and (min-width:48em){.css-18vl5qo{font-size:1.25rem;}}</style><main class="css-18vl5qo"><style data-emotion-css="b9a69l">.css-b9a69l{box-sizing:border-box;margin:0;min-width:0;max-width:33em;font-size:1rem;line-height:1.5;max-width:33em;margin-top:1rem;}@media screen and (min-width:48em){.css-b9a69l{font-size:1.25rem;}}</style><p class="css-b9a69l">I’m a big fan of the <style data-emotion-css="vxtv22">.css-vxtv22{box-sizing:border-box;margin:0;min-width:0;color:inherit;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration-color:#f2930d;text-decoration-color:#f2930d;}.css-vxtv22:hover{color:#f2930d;}.css-vxtv22:hover code{color:#f2930d;}@media print{.css-vxtv22:after{content:' (' attr(href) ')';font-size:0.875em;}.css-vxtv22[href^='/']:after{content:' (https://lowmess.com' attr(href) ')';}.css-vxtv22[href^='#']{-webkit-text-decoration:none;text-decoration:none;}.css-vxtv22[href^='#']:after{content:'';}}</style><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" class="css-vxtv22">Fetch API</a>. I use it regularly in all sorts of projects, including this site and the API that powers the stats on the <a href="/about/" class="css-vxtv22">about page</a>. However it isn’t always as clear how to do things like error handling and request timeouts as it is in libraries like <a href="https://github.com/axios/axios" class="css-vxtv22">Axios</a>.</p><p class="css-b9a69l">If you’re not familiar with <style data-emotion-css="1f2zuos">.css-1f2zuos{box-sizing:border-box;margin:0;min-width:0;border:1px solid;border-color:rgba(0,0,0,0.1);border-radius:0.125rem;padding-left:0.25rem;padding-right:0.25rem;background-color:#f9f9f8;color:#443e35;font-size:0.875rem;font-family:Menlo,Consolas,Roboto Mono,Ubuntu Monospace,Oxygen Mono,Liberation Mono,monospace;white-space:nowrap;}@media screen and (min-width:48em){.css-1f2zuos{font-size:1rem;}}</style><code class="css-1f2zuos">fetch</code>, it’s a native API that massively simplifies making AJAX requests compared to the older <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHTTPRequest" class="css-vxtv22">XHR</a> method, and <a href="https://caniuse.com/#feat=fetch" class="css-vxtv22">it’s supported in all modern browsers</a>. When it initially landed, however, there was no easy way to handle request timeouts. You could fake it with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race" class="css-vxtv22"><code class="css-1f2zuos">Promise.race</code></a> or by <a href="https://github.com/github/fetch/issues/175#issuecomment-216791333" class="css-vxtv22">wrapping your <code class="css-1f2zuos">fetch</code> in another Promise</a>, but these solutions don’t actually cancel the request. This is where <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController" class="css-vxtv22"><code class="css-1f2zuos">AbortController</code></a> comes in.</p><p class="css-b9a69l"><code class="css-1f2zuos">AbortController</code> is an API that, much like its name and my previous sentence suggests, allows us to abort (cancel) requests. Though <a href="https://caniuse.com/#feat=abortcontroller" class="css-vxtv22">browser support isn’t <em>wonderful</em> at time of writing</a>, it can be used in most modern browsers and <a href="https://github.com/mo/abortcontroller-polyfill" class="css-vxtv22">polyfills are available</a>. The API itself has a very small surface area: a <code class="css-1f2zuos">signal</code> property to attach to request objects, and an <code class="css-1f2zuos">abort</code> method to actually cancel the request. Because the API is so simple, it’s very flexible — Jake Archibald has <a href="https://developers.google.com/web/updates/2017/09/abortable-fetch" class="css-vxtv22">a fairly in-depth article on the Google Developers blog</a> going over various cancellation scenarios, as well as the history behind the API, and I highly recommend giving it a read.</p><p class="css-b9a69l">With <code class="css-1f2zuos">AbortController</code>, it becomes trivial to cancel a request if it doesn’t resolve before a given period of time: if the <code class="css-1f2zuos">abort</code> method is called before the request resolves (or before the response <code class="css-1f2zuos">Body</code> is consumed), the request is cancelled; if it’s called after, the browser just ignores the call. To put it all together, we need to:</p><style data-emotion-css="iatzw7">.css-iatzw7{box-sizing:border-box;margin:0;min-width:0;margin-top:1rem;padding-left:2rem;}.css-iatzw7 ul,.css-iatzw7 ol{margin-top:0;margin-bottom:0;}</style><ol class="css-iatzw7"><li>Create an instance of <code class="css-1f2zuos">AbortController</code></li><li>Create a <code class="css-1f2zuos">setTimeout</code> function that calls the controller’s <code class="css-1f2zuos">abort</code> method</li><li>Pass the controller’s <code class="css-1f2zuos">signal</code> to <code class="css-1f2zuos">fetch</code>’s options object</li></ol><style data-emotion-css="17bh652">.css-17bh652{box-sizing:border-box;margin:0;min-width:0;font-size:2.25rem;font-family:heading;font-weight:heading;line-height:heading;font-size:1.25rem;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Oxygen,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.25;font-weight:700;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:2rem;padding-top:2rem;font-size:1.25rem;font-weight:600;}@media screen and (min-width:48em){.css-17bh652{font-size:1.5rem;}}.css-17bh652 .heading-link{visibility:hidden;position:absolute;right:100%;padding-left:0.5rem;padding-right:0.5rem;}.css-17bh652 .heading-link:hover{color:#f2930d;}.css-17bh652:hover .heading-link{visibility:visible;}@media screen and (min-width:48em){.css-17bh652{font-size:1.5rem;}}</style><h2 id="putting-it-all-together" class="css-17bh652"><style data-emotion-css="1wf85w4">.css-1wf85w4{box-sizing:border-box;margin:0;min-width:0;color:inherit;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration-color:#f2930d;text-decoration-color:#f2930d;}.css-1wf85w4:hover{color:#f2930d;}</style><a href="#putting-it-all-together" class="heading-link css-1wf85w4"><svg viewBox="0 0 32 32" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M3.04 16A4.966 4.966 0 0 1 8 11.04h6.4V8H8c-4.415 0-8 3.584-8 8s3.585 8 8 8h6.4v-3.04H8A4.966 4.966 0 0 1 3.04 16zm6.56 1.6h12.8v-3.2H9.6v3.2zM24 8h-6.4v3.04H24A4.966 4.966 0 0 1 28.96 16 4.966 4.966 0 0 1 24 20.96h-6.4V24H24c4.415 0 8-3.584 8-8s-3.585-8-8-8z"></path></svg></a>Putting It All Together</h2><p class="css-b9a69l">First, because we’re basically writing a shim around <code class="css-1f2zuos">fetch</code>, I’m going to add an extra little perk. If the response doesn’t return in the <code class="css-1f2zuos">200</code> range (that is, if <code class="css-1f2zuos">response.ok</code> evaluates to <code class="css-1f2zuos">false</code>), we’re going to throw an error. We absolutely do not need to do this — we could just catch our timeout and the function would work the same (we actually don’t even <em>need</em> to do that). However, I always perform this check anyways, so this removes a lot of boilerplate code for me.</p><p class="css-b9a69l">Anyways, here is my generic <code class="css-1f2zuos">fetchWithTimeout</code> function. It should work in any environment that supports <code class="css-1f2zuos">fetch</code> and <code class="css-1f2zuos">AbortController</code>.</p><pre><style data-emotion-css="6urk41">.css-6urk41{box-sizing:border-box;margin:0;min-width:0;border-left:0.5rem solid;border-color:#f2930d;border-radius:0.125rem;padding:1rem;width:100%;overflow-x:scroll;margin-top:2rem;margin-bottom:2rem;background-color:#39342d;color:#f9f9f8;font-size:0.875rem;font-family:Menlo,Consolas,Roboto Mono,Ubuntu Monospace,Oxygen Mono,Liberation Mono,monospace;white-space:pre;}@media screen and (min-width:48em){.css-6urk41{font-size:1rem;}}@media print{.css-6urk41{background-color:transparent;color:#443e35;}}.css-6urk41 .token-line{overflow:visible !important;}.css-6urk41 .token:last-child{padding-right:1rem;}</style><div class="prism-code language-js css-6urk41" style="background-color:#39342d;color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><style data-emotion-css="ra9tsr">.css-ra9tsr{box-sizing:border-box;margin:0;min-width:0;display:none;width:1.75em;margin-right:1rem;padding-right:0.5rem;text-align:right;color:#756a5b;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}@media screen and (min-width:48em){.css-ra9tsr{display:inline-block;}}</style><span class="css-ra9tsr">1</span><span class="token keyword" style="color:#f2930d">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#85b4f8">fetchWithTimeout</span><span class="token plain"> </span><span class="token operator" style="color:#f2f99d">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">(</span><span class="token parameter">uri</span><span class="token parameter punctuation" style="color:#a89e90">,</span><span class="token parameter"> options </span><span class="token parameter operator" style="color:#f2f99d">=</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#a89e90">{</span><span class="token parameter punctuation" style="color:#a89e90">}</span><span class="token parameter punctuation" style="color:#a89e90">,</span><span class="token parameter"> time </span><span class="token parameter operator" style="color:#f2f99d">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:#bb68f6">5000</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#f2f99d">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">2</span><span class="token plain">  </span><span class="token comment" style="color:#938776">// Lets set up our `AbortController`, and create a request options object</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">3</span><span class="token plain">  </span><span class="token comment" style="color:#938776">// that includes the controller&#x27;s `signal` to pass to `fetch`.</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">4</span><span class="token plain">  </span><span class="token keyword" style="color:#f2930d">const</span><span class="token plain"> controller </span><span class="token operator" style="color:#f2f99d">=</span><span class="token plain"> </span><span class="token keyword" style="color:#f2930d">new</span><span class="token plain"> </span><span class="token class-name" style="color:#f2f99d;text-decoration:underline">AbortController</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">5</span><span class="token plain">  </span><span class="token keyword" style="color:#f2930d">const</span><span class="token plain"> config </span><span class="token operator" style="color:#f2f99d">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#f2f99d">...</span><span class="token plain">options</span><span class="token punctuation" style="color:#a89e90">,</span><span class="token plain"> signal</span><span class="token punctuation" style="color:#a89e90">:</span><span class="token plain"> controller</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token property-access">signal</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">6</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">7</span><span class="token plain">  </span><span class="token comment" style="color:#938776">// Set a timeout limit for the request using `setTimeout`. If the body of this</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">8</span><span class="token plain">  </span><span class="token comment" style="color:#938776">// timeout is reached before the request is completed, it will be cancelled.</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">9</span><span class="token plain">  </span><span class="token keyword" style="color:#f2930d">const</span><span class="token plain"> timeout </span><span class="token operator" style="color:#f2f99d">=</span><span class="token plain"> </span><span class="token function" style="color:#85b4f8">setTimeout</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#f2f99d">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">10</span><span class="token plain">    controller</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">abort</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">11</span><span class="token plain">  </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token punctuation" style="color:#a89e90">,</span><span class="token plain"> time</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">12</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">13</span><span class="token plain">  </span><span class="token keyword" style="color:#f2930d">return</span><span class="token plain"> </span><span class="token function" style="color:#85b4f8">fetch</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#a89e90">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">14</span><span class="token plain">    </span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">then</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token parameter">response</span><span class="token plain"> </span><span class="token arrow operator" style="color:#f2f99d">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">15</span><span class="token plain">      </span><span class="token comment" style="color:#938776">// Because _any_ response is considered a success to `fetch`,</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">16</span><span class="token plain">      </span><span class="token comment" style="color:#938776">// we need to manually check that the response is in the 200 range.</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">17</span><span class="token plain">      </span><span class="token comment" style="color:#938776">// This is typically how I handle that.</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">18</span><span class="token plain">      </span><span class="token keyword" style="color:#f2930d">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">(</span><span class="token operator" style="color:#f2f99d">!</span><span class="token plain">response</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token property-access">ok</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">19</span><span class="token plain">        </span><span class="token keyword" style="color:#f2930d">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#f2930d">new</span><span class="token plain"> </span><span class="token class-name" style="color:#f2f99d;text-decoration:underline">Error</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token template-string template-punctuation string" style="color:#f67468">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#a89e90">${</span><span class="token template-string interpolation">response</span><span class="token template-string interpolation punctuation" style="color:#a89e90">.</span><span class="token template-string interpolation">status</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#a89e90">}</span><span class="token template-string string" style="color:#f67468">: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#a89e90">${</span><span class="token template-string interpolation">response</span><span class="token template-string interpolation punctuation" style="color:#a89e90">.</span><span class="token template-string interpolation">statusText</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#a89e90">}</span><span class="token template-string template-punctuation string" style="color:#f67468">`</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">20</span><span class="token plain">      </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">21</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">22</span><span class="token plain">      </span><span class="token keyword" style="color:#f2930d">return</span><span class="token plain"> response</span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">23</span><span class="token plain">    </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">24</span><span class="token plain">    </span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">catch</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token parameter">error</span><span class="token plain"> </span><span class="token arrow operator" style="color:#f2f99d">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">25</span><span class="token plain">      </span><span class="token comment" style="color:#938776">// When we abort our `fetch`, the controller conveniently throws a named</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">26</span><span class="token plain">      </span><span class="token comment" style="color:#938776">// error, allowing us to handle them separately from other errors.</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">27</span><span class="token plain">      </span><span class="token keyword" style="color:#f2930d">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color:#f2f99d">===</span><span class="token plain"> </span><span class="token string" style="color:#f67468">&#x27;AbortError&#x27;</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">28</span><span class="token plain">        </span><span class="token keyword" style="color:#f2930d">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#f2930d">new</span><span class="token plain"> </span><span class="token class-name" style="color:#f2f99d;text-decoration:underline">Error</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token string" style="color:#f67468">&#x27;Response timed out&#x27;</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">29</span><span class="token plain">      </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">30</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">31</span><span class="token plain">      </span><span class="token keyword" style="color:#f2930d">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#f2930d">new</span><span class="token plain"> </span><span class="token class-name" style="color:#f2f99d;text-decoration:underline">Error</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">32</span><span class="token plain">    </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">33</span><span class="token plain"></span><span class="token punctuation" style="color:#a89e90">}</span></div></div></pre><p class="css-b9a69l">Using the function is fairly straightforward. Because we return <code class="css-1f2zuos">fetch</code> directly, we can use it in much the same way; the only change should be the addition of a third parameter (our <code class="css-1f2zuos">time</code> argument) and the extra error handling we discussed above.</p><pre><div class="prism-code language-js css-6urk41" style="background-color:#39342d;color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">1</span><span class="token comment" style="color:#938776">// This example _always_ logs the error, because I&#x27;m telling httpstat.us to wait</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">2</span><span class="token plain"></span><span class="token comment" style="color:#938776">// at least 1s before responding, but setting the timeout threshold to 500ms.</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">3</span><span class="token plain"></span><span class="token comment" style="color:#938776">// Also, this could definitely be written in async/await if you preferred.</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">4</span><span class="token plain"></span><span class="token function" style="color:#85b4f8">fetchWithTimeout</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">5</span><span class="token plain">  </span><span class="token string" style="color:#f67468">&#x27;https://httpstat.us/200?sleep=1000&#x27;</span><span class="token punctuation" style="color:#a89e90">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">6</span><span class="token plain">  </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"> headers</span><span class="token punctuation" style="color:#a89e90">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"> </span><span class="token maybe-class-name">Accept</span><span class="token punctuation" style="color:#a89e90">:</span><span class="token plain"> </span><span class="token string" style="color:#f67468">&#x27;application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token punctuation" style="color:#a89e90">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">7</span><span class="token plain">  </span><span class="token number" style="color:#bb68f6">500</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">8</span><span class="token plain"></span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">9</span><span class="token plain">  </span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">then</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token parameter">response</span><span class="token plain"> </span><span class="token arrow operator" style="color:#f2f99d">=&gt;</span><span class="token plain"> response</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">json</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">10</span><span class="token plain">  </span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">then</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token parameter">json</span><span class="token plain"> </span><span class="token arrow operator" style="color:#f2f99d">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">11</span><span class="token plain">    </span><span class="token console class-name" style="color:#f2f99d;text-decoration:underline">console</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">log</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token template-string template-punctuation string" style="color:#f67468">`</span><span class="token template-string string" style="color:#f67468">This will never log out: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#a89e90">${</span><span class="token template-string interpolation">json</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#a89e90">}</span><span class="token template-string template-punctuation string" style="color:#f67468">`</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">12</span><span class="token plain">  </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">13</span><span class="token plain">  </span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">catch</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token parameter">error</span><span class="token plain"> </span><span class="token arrow operator" style="color:#f2f99d">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#a89e90">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">14</span><span class="token plain">    </span><span class="token console class-name" style="color:#f2f99d;text-decoration:underline">console</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token method function property-access" style="color:#85b4f8">error</span><span class="token punctuation" style="color:#a89e90">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#a89e90">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#a89e90">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f9f9f8;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:2;hyphens:none;overflow:auto"><span class="css-ra9tsr">15</span><span class="token plain">  </span><span class="token punctuation" style="color:#a89e90">}</span><span class="token punctuation" style="color:#a89e90">)</span></div></div></pre><style data-emotion-css="6pxjk9">.css-6pxjk9{box-sizing:border-box;margin:0;min-width:0;max-width:4rem;height:0.25rem;margin-top:2rem;margin-bottom:2rem;margin-left:0;margin-right:0;border:0;background-color:#f2930d;}</style><hr class="css-6pxjk9"/><p class="css-b9a69l">That’s it. That’s the whole post. Though the snippet is ultimately pretty simple (it’s 20 lines without whitespace and comments) writing this provided me with three major benefits: it forced me to abstract the function to the most reusable version I could, it gave me an opportunity to research <code class="css-1f2zuos">AbortController</code> to make sure I knew exactly how it behaved, and it provided a place where I can come find this snippet in the future instead of rooting through old projects.</p></main></article></main><style data-emotion-css="n1swva">.css-n1swva{box-sizing:border-box;margin:0;min-width:0;font-family:Menlo,Consolas,Roboto Mono,Ubuntu Monospace,Oxygen Mono,Liberation Mono,monospace;margin-top:auto;margin-bottom:1rem;}@media screen and (min-width:48em){.css-n1swva{margin-bottom:1rem;}}@media screen and (min-width:64em){.css-n1swva{margin-bottom:2rem;}}</style><footer class="css-n1swva"><style data-emotion-css="ymqbme">.css-ymqbme{box-sizing:border-box;margin:0;min-width:0;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media screen and (min-width:48em){.css-ymqbme{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media screen and (min-width:64em){.css-ymqbme{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}}</style><div class="css-ymqbme"><style data-emotion-css="clzlpd">.css-clzlpd{box-sizing:border-box;margin:0;min-width:0;display:none;}@media screen and (min-width:48em){.css-clzlpd{display:none;}}@media screen and (min-width:64em){.css-clzlpd{display:block;}}</style><div class="css-clzlpd"><style data-emotion-css="op4fzj">.css-op4fzj{box-sizing:border-box;margin:0;min-width:0;margin-right:0.5rem;}</style><span class="css-op4fzj">From the blog:</span><style data-emotion-css="1w0r8xu">.css-1w0r8xu{box-sizing:border-box;margin:0;min-width:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-1w0r8xu:hover{color:#f2930d;}</style><a class="css-1w0r8xu" href="/blog/no-red-squigglies-for-semicolons/"><style data-emotion-css="1jewwb">.css-1jewwb{box-sizing:border-box;margin:0;min-width:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:0.875rem;font-family:Menlo,Consolas,Roboto Mono,Ubuntu Monospace,Oxygen Mono,Liberation Mono,monospace;font-weight:700;}@media screen and (min-width:48em){.css-1jewwb{font-size:1rem;}}</style><span class="css-1jewwb">No Red Squigglies For Semicolons<!-- --> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 16" width="24" height="16" preserveAspectRatio="xMinYMid"><path d="M8 8.61V7.39h12V4l4 4-4 4V8.61H8z"></path></svg></span></a></div><style data-emotion-css="1h275wr">.css-1h275wr{box-sizing:border-box;margin:0;min-width:0;margin:0;padding:0;list-style-type:none;}</style><ul class="css-1h275wr"><style data-emotion-css="177x7e8">.css-177x7e8{box-sizing:border-box;margin:0;min-width:0;display:inline-block;}.css-177x7e8 + .css-177x7e8{margin-left:1rem;}</style><li class="css-177x7e8"><style data-emotion-css="aizcs3">.css-aizcs3{box-sizing:border-box;margin:0;min-width:0;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:0.875rem;}.css-aizcs3:hover{color:#f2930d;}@media screen and (min-width:48em){.css-aizcs3{font-size:1rem;}}</style><a href="https://twitter.com/Nikhil17_namal" class="css-aizcs3">Twitter</a></li><li class="css-177x7e8"><a href="https://github.com/NikhilNamal17" class="css-aizcs3">GitHub</a></li><li class="css-177x7e8"><a href="https://bit.ly/nikhil-namal-resume" class="css-aizcs3">Résumé</a></li></ul></div></footer></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/fetch-with-timeout/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-849c33fb70df35abcf41.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-30314d2e7ee1d43f6ff5.js"],"component---src-pages-about-jsx":["/component---src-pages-about-jsx-ee287ff1b3b8667955ec.js"],"component---src-pages-blog-jsx":["/component---src-pages-blog-jsx-0848696ebc2f60fb7b5b.js"],"component---src-pages-colophon-jsx":["/component---src-pages-colophon-jsx-c6e8c9983da31c090dd8.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx-8d965c59b51a23aba1f0.js"],"component---src-pages-projects-jsx":["/component---src-pages-projects-jsx-2071d864f5d83df34ca5.js"],"component---src-pages-blog-a-better-album-ranking-algorithm-index-mdx":["/component---src-pages-blog-a-better-album-ranking-algorithm-index-mdx-9ea231377164f5c21ce7.js"],"component---src-pages-blog-a-form-fitted-z-shell-index-mdx":["/component---src-pages-blog-a-form-fitted-z-shell-index-mdx-ba72cbd8610a54a926cc.js"],"component---src-pages-blog-customizing-tachyons-index-mdx":["/component---src-pages-blog-customizing-tachyons-index-mdx-904f4f0d252d61cd06ad.js"],"component---src-pages-blog-fetch-with-timeout-index-mdx":["/component---src-pages-blog-fetch-with-timeout-index-mdx-4e5ff46ac778a918ab23.js"],"component---src-pages-blog-functional-first-accordions-index-mdx":["/component---src-pages-blog-functional-first-accordions-index-mdx-58dec18a6c36d4791634.js"],"component---src-pages-blog-no-red-squigglies-for-semicolons-index-mdx":["/component---src-pages-blog-no-red-squigglies-for-semicolons-index-mdx-1e4abb55d2b18a92bc46.js"],"component---src-pages-blog-on-declarative-styling-index-mdx":["/component---src-pages-blog-on-declarative-styling-index-mdx-02cbcd66d26cacc47de0.js"]};/*]]>*/</script><script src="/component---src-pages-blog-fetch-with-timeout-index-mdx-4e5ff46ac778a918ab23.js" async=""></script><script src="/commons-652c8223faa9c70cdf83.js" async=""></script><script src="/app-849c33fb70df35abcf41.js" async=""></script><script src="/styles-d7bca83241f8e3231f4d.js" async=""></script><script src="/webpack-runtime-7f057ab76526c2332872.js" async=""></script></body></html>